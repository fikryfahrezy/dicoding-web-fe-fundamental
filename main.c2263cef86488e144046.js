/*! For license information please see main.c2263cef86488e144046.js.LICENSE.txt */
(()=>{var e={727:()=>{class e extends HTMLElement{set case(e){this.caseItem=e,this.render()}render(){const{provinceState:e,countryRegion:t,lastUpdate:s,confirmed:o,deaths:r,recovered:n}=this.caseItem,a=document.createElement("div");this.appendChild(a),a.classList.add("card");const i=document.createElement("div");a.appendChild(i);const c=document.createElement("span");i.appendChild(c),c.classList.add("country-badge"),c.textContent=t;const d=document.createElement("p");i.appendChild(d),d.classList.add("date"),d.textContent=s;const l=document.createElement("h2");a.appendChild(l),l.classList.add("province"),l.textContent=e;const h=document.createElement("p");a.appendChild(h),h.classList.add("card-label"),h.textContent="Confirmed";const u=document.createElement("h2");a.appendChild(u),u.classList.add("card-value","blue"),u.textContent=o;const p=document.createElement("p");a.appendChild(p),p.classList.add("card-label"),p.textContent="Recovered";const m=document.createElement("p");a.appendChild(m),m.classList.add("card-value","green"),m.textContent=n;const f=document.createElement("p");a.appendChild(f),f.classList.add("card-label"),f.textContent="Deaths";const y=document.createElement("p");a.appendChild(y),y.classList.add("card-value","red"),y.textContent=r}}customElements.define("case-item",e)},193:()=>{class e extends HTMLElement{connectedCallback(){this.render()}render(){const e=document.createElement("h1");e.textContent="Covid Cases",e.classList.add("text-3xl","font-bold"),this.appendChild(e)}}customElements.define("nav-bar",e)},977:()=>{class e extends HTMLElement{set option(e){this.optionItem=e,this.render()}render(){const{value:e}=this.optionItem,t=document.createElement("button");t.setAttribute("id",e.toLowerCase()),t.classList.add("button"),t.textContent=e,this.appendChild(t)}}customElements.define("option-item",e)},162:()=>{class e extends HTMLElement{constructor(){super(),this.inputId="search-input"}connectedCallback(){this.render()}get value(){return this.getElementById(this.inputId).value}render(){const e=document.createElement("input");e.setAttribute("id",this.inputId),e.type="text",e.placeholder="Search",this.appendChild(e)}}customElements.define("search-bar",e)}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}(()=>{"use strict";s(193),s(162),s(977);class e extends HTMLElement{set options(e=[]){this.optionsList=e,this.render()}render(){this.optionsList.forEach((e=>{const t=document.createElement("option-item");t.option=e,this.appendChild(t)}))}}customElements.define("option-list",e),s(727);class t extends HTMLElement{set cases(e=[]){this.caseList=e,this.render()}setLoading(){this.innerHTML="";const e=document.createElement("h2");e.textContent="Loading",this.classList.add("ungrid"),this.appendChild(e)}renderError(e){this.innerHTML="";const t=document.createElement("h2");t.textContent=e,this.classList.add("ungrid"),this.appendChild(t)}render(){if(this.innerHTML="",0===this.caseList.length){const e=document.createElement("h2");return e.textContent="No data available",this.classList.add("ungrid"),void this.appendChild(e)}this.classList.remove("ungrid"),this.caseList.forEach((e=>{const t=document.createElement("case-item");t.case=e,this.appendChild(t)}))}}customElements.define("case-list",t);class o extends Error{constructor(e,t,s){const o=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim();super("Request failed with "+(o?`status code ${o}`:"an unknown error")),this.name="HTTPError",this.response=e,this.request=t,this.options=s}}class r extends Error{constructor(e){super("Request timed out"),this.name="TimeoutError",this.request=e}}const n=e=>null!==e&&"object"==typeof e,a=(...e)=>{for(const t of e)if((!n(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return c({},...e)},i=(e={},t={})=>{const s=new globalThis.Headers(e),o=t instanceof globalThis.Headers,r=new globalThis.Headers(t);for(const[e,t]of r.entries())o&&"undefined"===t||void 0===t?s.delete(e):s.set(e,t);return s},c=(...e)=>{let t={},s={};for(const o of e)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(n(o)){for(let[e,s]of Object.entries(o))n(s)&&e in t&&(s=c(t[e],s)),t={...t,[e]:s};n(o.headers)&&(s=i(s,o.headers),t.headers=s)}return t},d="function"==typeof globalThis.AbortController,l="function"==typeof globalThis.ReadableStream,h="function"==typeof globalThis.FormData,u=["get","post","put","patch","head","delete"],p={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},m=2147483647,f=Symbol("stop"),y=e=>u.includes(e)?e.toUpperCase():e,b=[413,429,503],g={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:b,maxRetryAfter:Number.POSITIVE_INFINITY},w=(e={})=>{if("number"==typeof e)return{...g,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...g,...e,afterStatusCodes:b}};class _{constructor(e,t={}){var s,o;if(this._retryCount=0,this._input=e,this._options={credentials:this._input.credentials||"same-origin",...t,headers:i(this._input.headers,t.headers),hooks:c({beforeRequest:[],beforeRetry:[],afterResponse:[]},t.hooks),method:y(null!==(s=t.method)&&void 0!==s?s:this._input.method),prefixUrl:String(t.prefixUrl||""),retry:w(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:void 0===t.timeout?1e4:t.timeout,fetch:null!==(o=t.fetch)&&void 0!==o?o:globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(d&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const e="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,e);!(h&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(e,t){const s=new _(e,t),r=async()=>{if(s._options.timeout>m)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await s._fetch();for(const t of s._options.hooks.afterResponse){const o=await t(s.request,s._options,s._decorateResponse(e.clone()));o instanceof globalThis.Response&&(e=o)}if(s._decorateResponse(e),!e.ok&&s._options.throwHttpErrors)throw new o(e,s.request,s._options);if(s._options.onDownloadProgress){if("function"!=typeof s._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!l)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(e.clone(),s._options.onDownloadProgress)}return e},n=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(r):r();for(const[e,o]of Object.entries(p))n[e]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||o);const r=(await n).clone();if("json"===e){if(204===r.status)return"";if(t.parseJson)return t.parseJson(await r.text())}return r[e]()};return n}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof r)){if(e instanceof o){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t);return Number.isNaN(e)?e=Date.parse(t)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter?0:e}if(413===e.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const s=Math.min(this._calculateRetryDelay(t),m);if(0!==s&&this._retryCount>0){await(async e=>new Promise((t=>{setTimeout(t,e)})))(s);for(const e of this._options.hooks.beforeRetry)if(await e({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===f)return;return this._retry(e)}throw t}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}return!1===this._options.timeout?this._options.fetch(this.request.clone()):(async(e,t,s)=>new Promise(((o,n)=>{const a=setTimeout((()=>{t&&t.abort(),n(new r(e))}),s.timeout);s.fetch(e).then(o).catch(n).then((()=>{clearTimeout(a)}))})))(this.request.clone(),this.abortController,this._options)}_stream(e,t){const s=Number(e.headers.get("content-length"))||0;let o=0;return new globalThis.Response(new globalThis.ReadableStream({async start(r){const n=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array),await async function e(){const{done:a,value:i}=await n.read();a?r.close():(t&&(o+=i.byteLength,t({percent:0===s?0:o/s,transferredBytes:o,totalBytes:s},i)),r.enqueue(i),await e())}()}}))}}const v=e=>{const t=(t,s)=>_.create(t,a(e,s));for(const s of u)t[s]=(t,o)=>_.create(t,a(e,o,{method:s}));return t.create=e=>v(a(e)),t.extend=t=>v(a(e,t)),t.stop=f,t},C=v(),E="https://covid19.mathdro.id/api",L=async e=>(await C.get(`${E}/daily/${e}`).json()).map((({provinceState:e,countryRegion:t,lastUpdate:s,confirmed:o,deaths:r,recovered:n})=>({countryRegion:t,lastUpdate:s,provinceState:e??"Unknown",confirmed:Number(o),deaths:Number(r),recovered:Number(n)}))),R=(e=Date.now())=>{const t=new Date(e);return t.setDate(t.getDate()-2),t.toLocaleDateString("en-US").split("/").join("-")};let x="";x=1628775713389,(()=>{const e=document.querySelector("search-bar"),t=e.querySelector(`#${e.inputId}`),s=document.querySelector("option-list"),o=document.querySelector("case-list");t.addEventListener("keydown",((e,t=300)=>{let s;return o=>{clearTimeout(s),s=setTimeout((()=>{e(o.target.value)}),t)}})((async e=>{try{let t=[];t=""===e?await L(R()):await(async e=>{const t=await C.get(`${E}/countries/${e}`).json(),{confirmed:s,recovered:o,deaths:r,lastUpdate:n}=t;return[{lastUpdate:n,provinceState:e,countryRegion:e,confirmed:s.value,recovered:o.value,deaths:r.value}]})(e),o.cases=t}catch(e){o.renderError(e.message)}}))),L(R()).then((e=>{o.cases=e})).catch((e=>{o.renderError(e.message)})),s.options=[{value:"Today"},{value:"Confirmed"},{value:"Recovered"},{value:"Deaths"}],document.querySelectorAll(".button").forEach(((e,t)=>{0===t&&e.classList.add("active"),e.addEventListener("click",(e=>{document.querySelectorAll(".button").forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),(async e=>{try{let t=[];switch(o.setLoading(),e){case"confirmed":t=await(async()=>(await C.get(`${E}/confirmed`).json()).map((({provinceState:e,countryRegion:t,lastUpdate:s,confirmed:o,deaths:r,recovered:n})=>({countryRegion:t,confirmed:o,deaths:r,provinceState:e??"Unknown",recovered:n??0,lastUpdate:new Date(s)}))))();break;case"recovered":t=await(async()=>await C.get(`${E}/recovered`).json())();break;case"deaths":t=await(async()=>(await C.get(`${E}/deaths`).json()).map((({provinceState:e,countryRegion:t,lastUpdate:s,confirmed:o,deaths:r,recovered:n})=>({countryRegion:t,confirmed:o,deaths:r,provinceState:e??"Unknown",recovered:n??0,lastUpdate:new Date(s)}))))();break;default:t=await L(R())}o.cases=t}catch(e){o.renderError(e.message)}})(e.target.id)}))}))})()})()})();
//# sourceMappingURL=main.c2263cef86488e144046.js.map